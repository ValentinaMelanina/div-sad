!function(t,e,a){function s(e,a){this.element=e,this.$element=t(e),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=t({}),this.options=t.extend({},o,a),this.init()}var o={active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,fluidHeight:!0,scrollToAccordion:!1,scrollToAccordionOnLoad:!0,scrollToAccordionOffset:0,accordionTabElement:"<div></div>",click:function(){},activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",container:"r-tabs",ul:"r-tabs-nav",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};s.prototype.init=function(){var a=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),t(e).on("resize",function(t){a._setState(t),!0!==a.options.fluidHeight&&a._equaliseHeights()}),t(e).on("hashchange",function(t){var s=a._getTabRefBySelector(e.location.hash),o=a._getTab(s);s>=0&&!o._ignoreHashChange&&!o.disabled&&a._openTab(t,a._getTab(s),!0)}),!1!==this.options.rotate&&this.startRotation(),!0!==this.options.fluidHeight&&a._equaliseHeights(),this.$element.bind("tabs-click",function(t,e){a.options.click.call(this,t,e)}),this.$element.bind("tabs-activate",function(t,e){a.options.activate.call(this,t,e)}),this.$element.bind("tabs-deactivate",function(t,e){a.options.deactivate.call(this,t,e)}),this.$element.bind("tabs-activate-state",function(t,e){a.options.activateState.call(this,t,e)}),this.$element.bind("tabs-load",function(t){var e;a._setState(t),!0===a.options.startCollapsed||"accordion"===a.options.startCollapsed&&"accordion"===a.state||(e=a._getStartTab(),a._openTab(t,e),a.options.load.call(this,t,e))}),this.$element.trigger("tabs-load")},s.prototype._loadElements=function(){var e=this,a=this.$element.children("ul:first"),s=[],o=0;return this.$element.addClass(e.options.classes.container),a.addClass(e.options.classes.ul),t("li",a).each(function(){var a,i,n,r,l,c=t(this);if(!c.hasClass(e.options.classes.stateExcluded)){l=(a=t("a",c)).attr("href"),i=t(l),n=t(e.options.accordionTabElement).insertBefore(i),r=t("<a></a>").attr("href",l).html(a.html()).appendTo(n);var d={_ignoreHashChange:!1,id:o,disabled:-1!==t.inArray(o,e.options.disabled),tab:t(this),anchor:t("a",c),panel:i,selector:l,accordionTab:n,accordionAnchor:r,active:!1};o++,s.push(d)}}),s},s.prototype._loadClasses=function(){for(var t=0;t<this.tabs.length;t++)this.tabs[t].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[t].anchor.addClass(this.options.classes.anchor),this.tabs[t].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[t].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[t].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[t].disabled&&(this.tabs[t].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[t].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},s.prototype._loadEvents=function(){for(var t=this,a=function(a){var s=t._getCurrentTab(),o=a.data.tab;a.preventDefault(),o.tab.trigger("tabs-click",o),o.disabled||(t.options.setHash&&(history.pushState?(e.location.origin||(e.location.origin=e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")),history.pushState(null,null,e.location.origin+e.location.pathname+e.location.search+o.selector)):e.location.hash=o.selector),a.data.tab._ignoreHashChange=!0,(s!==o||t._isCollapisble())&&(t._closeTab(a,s),s===o&&t._isCollapisble()||t._openTab(a,o,!1,!0)))},s=0;s<this.tabs.length;s++)this.tabs[s].anchor.on(t.options.event,{tab:t.tabs[s]},a),this.tabs[s].accordionAnchor.on(t.options.event,{tab:t.tabs[s]},a)},s.prototype._getStartTab=function(){var t=this._getTabRefBySelector(e.location.hash);return t>=0&&!this._getTab(t).disabled?this._getTab(t):this.options.active>0&&!this._getTab(this.options.active).disabled?this._getTab(this.options.active):this._getTab(0)},s.prototype._setState=function(e){var a,s=t("ul:first",this.$element),o=this.state,i="string"==typeof this.options.startCollapsed;s.is(":visible")?this.state="tabs":this.state="accordion",this.state!==o&&(this.$element.trigger("tabs-activate-state",{oldState:o,newState:this.state}),o&&i&&this.options.startCollapsed!==this.state&&void 0===this._getCurrentTab()&&(a=this._getStartTab(e),this._openTab(e,a)))},s.prototype._openTab=function(e,a,s,o){var i,n=this;s&&this._closeTab(e,this._getCurrentTab()),o&&this.rotateInterval>0&&this.stopRotation(),a.active=!0,a.tab.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),a.accordionTab.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),n._doTransition(a.panel,n.options.animation,"open",function(){var s="tabs-load"!==e.type||n.options.scrollToAccordionOnLoad;a.panel.removeClass(n.options.classes.stateDefault).addClass(n.options.classes.stateActive),"accordion"!==n.getState()||!n.options.scrollToAccordion||n._isInView(a.accordionTab)&&"default"===n.options.animation||!s||(i=a.accordionTab.offset().top-n.options.scrollToAccordionOffset,"default"!==n.options.animation&&n.options.duration>0?t("html, body").animate({scrollTop:i},n.options.duration):t("html, body").scrollTop(i))}),this.$element.trigger("tabs-activate",a)},s.prototype._closeTab=function(t,e){var a,s=this,o="string"==typeof s.options.animationQueue;void 0!==e&&(a=!(!o||s.getState()!==s.options.animationQueue)||!o&&s.options.animationQueue,e.active=!1,e.tab.removeClass(s.options.classes.stateActive).addClass(s.options.classes.stateDefault),s._doTransition(e.panel,s.options.animation,"close",function(){e.accordionTab.removeClass(s.options.classes.stateActive).addClass(s.options.classes.stateDefault),e.panel.removeClass(s.options.classes.stateActive).addClass(s.options.classes.stateDefault)},!a),this.$element.trigger("tabs-deactivate",e))},s.prototype._doTransition=function(t,e,a,s,o){var i,n=this;switch(e){case"slide":i="open"===a?"slideDown":"slideUp";break;case"fade":i="open"===a?"fadeIn":"fadeOut";break;default:i="open"===a?"show":"hide",n.options.duration=0}this.$queue.queue("responsive-tabs",function(o){t[i]({duration:n.options.duration,complete:function(){s.call(t,e,a),o()}})}),("open"===a||o)&&this.$queue.dequeue("responsive-tabs")},s.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},s.prototype._getTab=function(t){return this.tabs[t]},s.prototype._getTabRefBySelector=function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].selector===t)return e;return-1},s.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},s.prototype._getNextTabRef=function(t){var e=t||this._getCurrentTabRef(),a=e===this.tabs.length-1?0:e+1;return this._getTab(a).disabled?this._getNextTabRef(a):a},s.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},s.prototype._getCurrentTabRef=function(){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].active)return t;return-1},s.prototype._equaliseHeights=function(){var e=0;t.each(t.map(this.tabs,function(t){return e=Math.max(e,t.panel.css("minHeight","").height()),t.panel}),function(){this.css("minHeight",e)})},s.prototype._isInView=function(a){var s=t(e).scrollTop(),o=s+t(e).height(),i=a.offset().top;return i+a.height()<=o&&i>=s},s.prototype.activate=function(t,e){var a=jQuery.Event("tabs-activate"),s=this._getTab(t);s.disabled||this._openTab(a,s,!0,e||!0)},s.prototype.deactivate=function(t){var e=jQuery.Event("tabs-dectivate"),a=this._getTab(t);a.disabled||this._closeTab(e,a)},s.prototype.enable=function(t){var e=this._getTab(t);e&&(e.disabled=!1,e.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),e.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},s.prototype.disable=function(t){var e=this._getTab(t);e&&(e.disabled=!0,e.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),e.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},s.prototype.getState=function(){return this.state},s.prototype.startRotation=function(e){var a=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var t=jQuery.Event("rotate");a._openTab(t,a._getTab(a._getNextTabRef()),!0)},e||(t.isNumeric(a.options.rotate)?a.options.rotate:4e3))},s.prototype.stopRotation=function(){e.clearInterval(this.rotateInterval),this.rotateInterval=0},s.prototype.option=function(t,e){return e&&(this.options[t]=e),this.options[t]},t.fn.responsiveTabs=function(e){var a,o=arguments;return void 0===e||"object"==typeof e?this.each(function(){t.data(this,"responsivetabs")||t.data(this,"responsivetabs",new s(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(a=t.data(this[0],"responsivetabs"),"destroy"===e&&t.data(this,"responsivetabs",null),a instanceof s&&"function"==typeof a[e]?a[e].apply(a,Array.prototype.slice.call(o,1)):this):void 0}}(jQuery,window),function(t){"use strict";function e(t){return null!==t&&t===t.window}function a(t){return e(t)?t:9===t.nodeType&&t.defaultView}function s(t){var e,s,o={top:0,left:0},i=t&&t.ownerDocument;return e=i.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),s=a(i),{top:o.top+s.pageYOffset-e.clientTop,left:o.left+s.pageXOffset-e.clientLeft}}function o(t){var e="";for(var a in t)t.hasOwnProperty(a)&&(e+=a+":"+t[a]+";");return e}function i(t){if(!1===d.allowEvent(t))return null;for(var e=null,a=t.target||t.srcElement;null!==a.parentNode;){if(!(a instanceof SVGElement)&&-1!==a.className.indexOf("waves-effect")){e=a;break}a=a.parentNode}return e}function n(e){var a=i(e);null!==a&&(c.show(e,a),"ontouchstart"in t&&(a.addEventListener("touchend",c.hide,!1),a.addEventListener("touchcancel",c.hide,!1)),a.addEventListener("mouseup",c.hide,!1),a.addEventListener("mouseleave",c.hide,!1),a.addEventListener("dragend",c.hide,!1))}var r=r||{},l=document.querySelectorAll.bind(document),c={duration:750,show:function(t,e){if(2===t.button)return!1;var a=e||this,i=document.createElement("div");i.className="waves-ripple",a.appendChild(i);var n=s(a),r=t.pageY-n.top,l=t.pageX-n.left,d="scale("+a.clientWidth/100*10+")";"touches"in t&&(r=t.touches[0].pageY-n.top,l=t.touches[0].pageX-n.left),i.setAttribute("data-hold",Date.now()),i.setAttribute("data-scale",d),i.setAttribute("data-x",l),i.setAttribute("data-y",r);var u={top:r+"px",left:l+"px"};i.className=i.className+" waves-notransition",i.setAttribute("style",o(u)),i.className=i.className.replace("waves-notransition",""),u["-webkit-transform"]=d,u["-moz-transform"]=d,u["-ms-transform"]=d,u["-o-transform"]=d,u.transform=d,u.opacity="1",u["-webkit-transition-duration"]=c.duration+"ms",u["-moz-transition-duration"]=c.duration+"ms",u["-o-transition-duration"]=c.duration+"ms",u["transition-duration"]=c.duration+"ms",u["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",i.setAttribute("style",o(u))},hide:function(t){d.touchup(t);var e=this,a=(e.clientWidth,null),s=e.getElementsByClassName("waves-ripple");if(!(s.length>0))return!1;var i=(a=s[s.length-1]).getAttribute("data-x"),n=a.getAttribute("data-y"),r=a.getAttribute("data-scale"),l=350-(Date.now()-Number(a.getAttribute("data-hold")));l<0&&(l=0),setTimeout(function(){var t={top:n+"px",left:i+"px",opacity:"0","-webkit-transition-duration":c.duration+"ms","-moz-transition-duration":c.duration+"ms","-o-transition-duration":c.duration+"ms","transition-duration":c.duration+"ms","-webkit-transform":r,"-moz-transform":r,"-ms-transform":r,"-o-transform":r,transform:r};a.setAttribute("style",o(t)),setTimeout(function(){try{e.removeChild(a)}catch(t){return!1}},c.duration)},l)},wrapInput:function(t){for(var e=0;e<t.length;e++){var a=t[e];if("input"===a.tagName.toLowerCase()){var s=a.parentNode;if("i"===s.tagName.toLowerCase()&&-1!==s.className.indexOf("waves-effect"))continue;var o=document.createElement("i");o.className=a.className+" waves-input-wrapper";var i=a.getAttribute("style");i||(i=""),o.setAttribute("style",i),a.className="waves-button-input",a.removeAttribute("style"),s.replaceChild(o,a),o.appendChild(a)}}}},d={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?d.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){d.touches>0&&(d.touches-=1)},500):"mousedown"===t.type&&d.touches>0&&(e=!1),e},touchup:function(t){d.allowEvent(t)}};r.displayEffect=function(e){"duration"in(e=e||{})&&(c.duration=e.duration),c.wrapInput(l(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",n,!1),document.body.addEventListener("mousedown",n,!1)},r.attach=function(e){"input"===e.tagName.toLowerCase()&&(c.wrapInput([e]),e=e.parentNode),"ontouchstart"in t&&e.addEventListener("touchstart",n,!1),e.addEventListener("mousedown",n,!1)},t.Waves=r,document.addEventListener("DOMContentLoaded",function(){r.displayEffect()},!1)}(window);var menu=document.querySelector(".main-menu"),headerTopBar=document.querySelector(".header__top-bar"),forEach=function(t,e,a){if("[object Object]"===Object.prototype.toString.call(t))for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(a,t[s],s,t);else for(var o=0,i=t.length;i>o;o++)e.call(a,t[o],o,t)},hamburgers=document.querySelectorAll(".hamburger");hamburgers.length>0&&forEach(hamburgers,function(t){t.addEventListener("click",function(){this.classList.toggle("is-active"),menu.classList.toggle("active"),headerTopBar.classList.toggle("active")},!1)}),$(document).ready(function(){$("#timetable-navigation").responsiveTabs({rotate:!1,startCollapsed:"accordion",collapsible:"accordion",setHash:!0})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsInVuZGVmaW5lZCIsIlJlc3BvbnNpdmVUYWJzIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJ0aGlzIiwiJGVsZW1lbnQiLCJ0YWJzIiwic3RhdGUiLCJyb3RhdGVJbnRlcnZhbCIsIiRxdWV1ZSIsImV4dGVuZCIsImRlZmF1bHRzIiwiaW5pdCIsImFjdGl2ZSIsImV2ZW50IiwiZGlzYWJsZWQiLCJjb2xsYXBzaWJsZSIsInN0YXJ0Q29sbGFwc2VkIiwicm90YXRlIiwic2V0SGFzaCIsImFuaW1hdGlvbiIsImFuaW1hdGlvblF1ZXVlIiwiZHVyYXRpb24iLCJmbHVpZEhlaWdodCIsInNjcm9sbFRvQWNjb3JkaW9uIiwic2Nyb2xsVG9BY2NvcmRpb25PbkxvYWQiLCJzY3JvbGxUb0FjY29yZGlvbk9mZnNldCIsImFjY29yZGlvblRhYkVsZW1lbnQiLCJjbGljayIsImFjdGl2YXRlIiwiZGVhY3RpdmF0ZSIsImxvYWQiLCJhY3RpdmF0ZVN0YXRlIiwiY2xhc3NlcyIsInN0YXRlRGVmYXVsdCIsInN0YXRlQWN0aXZlIiwic3RhdGVEaXNhYmxlZCIsInN0YXRlRXhjbHVkZWQiLCJjb250YWluZXIiLCJ1bCIsInRhYiIsImFuY2hvciIsInBhbmVsIiwiYWNjb3JkaW9uVGl0bGUiLCJwcm90b3R5cGUiLCJfdGhpcyIsIl9sb2FkRWxlbWVudHMiLCJfbG9hZENsYXNzZXMiLCJfbG9hZEV2ZW50cyIsIm9uIiwiZSIsIl9zZXRTdGF0ZSIsIl9lcXVhbGlzZUhlaWdodHMiLCJ0YWJSZWYiLCJfZ2V0VGFiUmVmQnlTZWxlY3RvciIsImxvY2F0aW9uIiwiaGFzaCIsIm9UYWIiLCJfZ2V0VGFiIiwiX2lnbm9yZUhhc2hDaGFuZ2UiLCJfb3BlblRhYiIsInN0YXJ0Um90YXRpb24iLCJiaW5kIiwiY2FsbCIsInN0YXJ0VGFiIiwiX2dldFN0YXJ0VGFiIiwidHJpZ2dlciIsIiR1bCIsImNoaWxkcmVuIiwiaWQiLCJhZGRDbGFzcyIsImVhY2giLCIkYW5jaG9yIiwiJHBhbmVsIiwiJGFjY29yZGlvblRhYiIsIiRhY2NvcmRpb25BbmNob3IiLCJwYW5lbFNlbGVjdG9yIiwiJHRhYiIsImhhc0NsYXNzIiwiYXR0ciIsImluc2VydEJlZm9yZSIsImh0bWwiLCJhcHBlbmRUbyIsImluQXJyYXkiLCJzZWxlY3RvciIsImFjY29yZGlvblRhYiIsImFjY29yZGlvbkFuY2hvciIsInB1c2giLCJpIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJmQWN0aXZhdGUiLCJjdXJyZW50IiwiX2dldEN1cnJlbnRUYWIiLCJhY3RpdmF0ZWRUYWIiLCJkYXRhIiwicHJldmVudERlZmF1bHQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwib3JpZ2luIiwicHJvdG9jb2wiLCJob3N0bmFtZSIsInBvcnQiLCJwYXRobmFtZSIsInNlYXJjaCIsIl9pc0NvbGxhcGlzYmxlIiwiX2Nsb3NlVGFiIiwib2xkU3RhdGUiLCJzdGFydENvbGxhcHNlZElzU3RhdGUiLCJpcyIsIm5ld1N0YXRlIiwiY2xvc2VDdXJyZW50Iiwic3RvcFJvdGF0aW9uIiwic2Nyb2xsT2Zmc2V0IiwiX2RvVHJhbnNpdGlvbiIsInNjcm9sbE9uTG9hZCIsInR5cGUiLCJnZXRTdGF0ZSIsIl9pc0luVmlldyIsIm9mZnNldCIsInRvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJkb1F1ZXVlIiwiZG9RdWV1ZU9uU3RhdGUiLCJtZXRob2QiLCJjYWxsYmFjayIsImRlcXVldWUiLCJlZmZlY3QiLCJxdWV1ZSIsIm5leHQiLCJjb21wbGV0ZSIsIm51bVJlZiIsIl9nZXRDdXJyZW50VGFiUmVmIiwiX2dldE5leHRUYWJSZWYiLCJjdXJyZW50VGFiUmVmIiwibmV4dFRhYlJlZiIsIl9nZXRQcmV2aW91c1RhYlJlZiIsIm1heEhlaWdodCIsIm1hcCIsIk1hdGgiLCJtYXgiLCJjc3MiLCJoZWlnaHQiLCJkb2NWaWV3VG9wIiwiZG9jVmlld0JvdHRvbSIsImVsZW1Ub3AiLCJqUXVlcnkiLCJFdmVudCIsImVuYWJsZSIsImRpc2FibGUiLCJzcGVlZCIsIkVycm9yIiwic2V0SW50ZXJ2YWwiLCJpc051bWVyaWMiLCJjbGVhckludGVydmFsIiwib3B0aW9uIiwia2V5IiwidmFsdWUiLCJmbiIsInJlc3BvbnNpdmVUYWJzIiwiaW5zdGFuY2UiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJBcnJheSIsInNsaWNlIiwiaXNXaW5kb3ciLCJvYmoiLCJnZXRXaW5kb3ciLCJlbGVtIiwibm9kZVR5cGUiLCJkZWZhdWx0VmlldyIsImRvY0VsZW0iLCJ3aW4iLCJib3giLCJsZWZ0IiwiZG9jIiwib3duZXJEb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInBhZ2VZT2Zmc2V0IiwiY2xpZW50VG9wIiwicGFnZVhPZmZzZXQiLCJjbGllbnRMZWZ0IiwiY29udmVydFN0eWxlIiwic3R5bGUiLCJhIiwiaGFzT3duUHJvcGVydHkiLCJnZXRXYXZlc0VmZmVjdEVsZW1lbnQiLCJUb3VjaEhhbmRsZXIiLCJhbGxvd0V2ZW50IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsInBhcmVudE5vZGUiLCJTVkdFbGVtZW50IiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsInNob3dFZmZlY3QiLCJFZmZlY3QiLCJzaG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJXYXZlcyIsIiQkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uIiwiZWwiLCJyaXBwbGUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJwb3MiLCJyZWxhdGl2ZVkiLCJwYWdlWSIsInJlbGF0aXZlWCIsInBhZ2VYIiwic2NhbGUiLCJjbGllbnRXaWR0aCIsInRvdWNoZXMiLCJzZXRBdHRyaWJ1dGUiLCJEYXRlIiwibm93IiwicmlwcGxlU3R5bGUiLCJyZXBsYWNlIiwidHJhbnNmb3JtIiwib3BhY2l0eSIsInRvdWNodXAiLCJyaXBwbGVzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEF0dHJpYnV0ZSIsImRlbGF5IiwiTnVtYmVyIiwic2V0VGltZW91dCIsIi13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbiIsIi1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbiIsIi1vLXRyYW5zaXRpb24tZHVyYXRpb24iLCJ0cmFuc2l0aW9uLWR1cmF0aW9uIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCItbW96LXRyYW5zZm9ybSIsIi1tcy10cmFuc2Zvcm0iLCItby10cmFuc2Zvcm0iLCJyZW1vdmVDaGlsZCIsIndyYXBJbnB1dCIsImVsZW1lbnRzIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Iiwid3JhcHBlciIsImVsZW1lbnRTdHlsZSIsInJlbW92ZUF0dHJpYnV0ZSIsInJlcGxhY2VDaGlsZCIsImFsbG93IiwiZGlzcGxheUVmZmVjdCIsImJvZHkiLCJhdHRhY2giLCJtZW51IiwicXVlcnlTZWxlY3RvciIsImhlYWRlclRvcEJhciIsImZvckVhY2giLCJ0IiwibyIsInIiLCJPYmplY3QiLCJ0b1N0cmluZyIsImMiLCJsIiwiaGFtYnVyZ2VycyIsImhhbWJ1cmdlciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlYWR5Il0sIm1hcHBpbmdzIjoiQ0FDRSxTQUFXQSxFQUFHQyxFQUFRQyxHQTRDcEIsU0FBU0MsRUFBZUMsRUFBU0MsR0FDN0JDLEtBQUtGLFFBQVVBLEVBQ2ZFLEtBQUtDLFNBQVdQLEVBQUVJLEdBRWxCRSxLQUFLRSxRQUNMRixLQUFLRyxNQUFRLEdBQ2JILEtBQUtJLGVBQWlCLEVBQ3RCSixLQUFLSyxPQUFTWCxNQUdkTSxLQUFLRCxRQUFVTCxFQUFFWSxVQUFZQyxFQUFVUixHQUV2Q0MsS0FBS1EsT0FyRFQsSUFBSUQsR0FDQUUsT0FBUSxLQUNSQyxNQUFPLFFBQ1BDLFlBQ0FDLFlBQWEsWUFDYkMsZ0JBQWdCLEVBQ2hCQyxRQUFRLEVBQ1JDLFNBQVMsRUFDVEMsVUFBVyxVQUNYQyxnQkFBZ0IsRUFDaEJDLFNBQVUsSUFDVkMsYUFBYSxFQUNiQyxtQkFBbUIsRUFDbkJDLHlC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QUV4TixFQUFFQSxJQUFJbU4sRUFBRXRNLEtBQUt1TSxFQUFFRixFQUFFbE4sR0FBR0EsRUFBRWtOLElBQ2xOTyxXQUFhOUQsU0FBU0MsaUJBQWlCLGNBQ3ZDNkQsV0FBV2xMLE9BQVMsR0FDcEIwSyxRQUFRUSxXQUFZLFNBQVNDLEdBQ3pCQSxFQUFVbkUsaUJBQWlCLFFBQVMsV0FDaENyTSxLQUFLeVEsVUFBVUMsT0FBTyxhQUN0QmQsS0FBS2EsVUFBVUMsT0FBTyxVQUN0QlosYUFBYVcsVUFBVUMsT0FBTyxZQUMvQixLQU1YaFIsRUFBRStNLFVBQVVrRSxNQUFNLFdBQ0ZqUixFQUFFLHlCQUNSa0ssZ0JBQ0Y5SSxRQUFRLEVBQ1JELGVBQWdCLFlBQ2hCRCxZQUFhLFlBQ2JHLFNBQVMiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbjsoZnVuY3Rpb24gKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcblxuICAgIC8qKiBEZWZhdWx0IHNldHRpbmdzICovXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBhY3RpdmU6IG51bGwsXG4gICAgICAgIGV2ZW50OiAnY2xpY2snLFxuICAgICAgICBkaXNhYmxlZDogW10sXG4gICAgICAgIGNvbGxhcHNpYmxlOiAnYWNjb3JkaW9uJyxcbiAgICAgICAgc3RhcnRDb2xsYXBzZWQ6IGZhbHNlLFxuICAgICAgICByb3RhdGU6IGZhbHNlLFxuICAgICAgICBzZXRIYXNoOiBmYWxzZSxcbiAgICAgICAgYW5pbWF0aW9uOiAnZGVmYXVsdCcsXG4gICAgICAgIGFuaW1hdGlvblF1ZXVlOiBmYWxzZSxcbiAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgZmx1aWRIZWlnaHQ6IHRydWUsXG4gICAgICAgIHNjcm9sbFRvQWNjb3JkaW9uOiBmYWxzZSxcbiAgICAgICAgc2Nyb2xsVG9BY2NvcmRpb25PbkxvYWQ6IHRydWUsXG4gICAgICAgIHNjcm9sbFRvQWNjb3JkaW9uT2Zmc2V0OiAwLFxuICAgICAgICBhY2NvcmRpb25UYWJFbGVtZW50OiAnPGRpdj48L2Rpdj4nLFxuICAgICAgICBjbGljazogZnVuY3Rpb24oKXt9LFxuICAgICAgICBhY3RpdmF0ZTogZnVuY3Rpb24oKXt9LFxuICAgICAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbigpe30sXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCl7fSxcbiAgICAgICAgYWN0aXZhdGVTdGF0ZTogZnVuY3Rpb24oKXt9LFxuICAgICAgICBjbGFzc2VzOiB7XG4gICAgICAgICAgICBzdGF0ZURlZmF1bHQ6ICdyLXRhYnMtc3RhdGUtZGVmYXVsdCcsXG4gICAgICAgICAgICBzdGF0ZUFjdGl2ZTogJ3ItdGFicy1zdGF0ZS1hY3RpdmUnLFxuICAgICAgICAgICAgc3RhdGVEaXNhYmxlZDogJ3ItdGFicy1zdGF0ZS1kaXNhYmxlZCcsXG4gICAgICAgICAgICBzdGF0ZUV4Y2x1ZGVkOiAnci10YWJzLXN0YXRlLWV4Y2x1ZGVkJyxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogJ3ItdGFicycsXG4gICAgICAgICAgICB1bDogJ3ItdGFicy1uYXYnLFxuICAgICAgICAgICAgdGFiOiAnci10YWJzLXRhYicsXG4gICAgICAgICAgICBhbmNob3I6ICdyLXRhYnMtYW5jaG9yJyxcbiAgICAgICAgICAgIHBhbmVsOiAnci10YWJzLXBhbmVsJyxcbiAgICAgICAgICAgIGFjY29yZGlvblRpdGxlOiAnci10YWJzLWFjY29yZGlvbi10aXRsZSdcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXNwb25zaXZlIFRhYnNcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZWxlbWVudCAtIFRoZSBIVE1MIGVsZW1lbnQgdGhlIHZhbGlkYXRvciBzaG91bGQgYmUgYm91bmQgdG9cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIEFuIG9wdGlvbiBtYXBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZXNwb25zaXZlVGFicyhlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7IC8vIFNlbGVjdGVkIERPTSBlbGVtZW50XG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpOyAvLyBTZWxlY3RlZCBqUXVlcnkgZWxlbWVudFxuXG4gICAgICAgIHRoaXMudGFicyA9IFtdOyAvLyBDcmVhdGUgdGFicyBhcnJheVxuICAgICAgICB0aGlzLnN0YXRlID0gJyc7IC8vIERlZmluZSB0aGUgcGx1Z2luIHN0YXRlICh0YWJzL2FjY29yZGlvbilcbiAgICAgICAgdGhpcy5yb3RhdGVJbnRlcnZhbCA9IDA7IC8vIERlZmluZSByb3RhdGUgaW50ZXJ2YWxcbiAgICAgICAgdGhpcy4kcXVldWUgPSAkKHt9KTtcblxuICAgICAgICAvLyBFeHRlbmQgdGhlIGRlZmF1bHRzIHdpdGggdGhlIHBhc3NlZCBvcHRpb25zXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpbml0aWFsaXplcyB0aGUgdGFiIHBsdWdpblxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIExvYWQgYWxsIHRoZSBlbGVtZW50c1xuICAgICAgICB0aGlzLnRhYnMgPSB0aGlzLl9sb2FkRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5fbG9hZENsYXNzZXMoKTtcbiAgICAgICAgdGhpcy5fbG9hZEV2ZW50cygpO1xuXG4gICAgICAgIC8vIFdpbmRvdyByZXNpemUgYmluZCB0byBjaGVjayBzdGF0ZVxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIF90aGlzLl9zZXRTdGF0ZShlKTtcbiAgICAgICAgICAgIGlmKF90aGlzLm9wdGlvbnMuZmx1aWRIZWlnaHQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fZXF1YWxpc2VIZWlnaHRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEhhc2hjaGFuZ2UgZXZlbnRcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHRhYlJlZiA9IF90aGlzLl9nZXRUYWJSZWZCeVNlbGVjdG9yKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcbiAgICAgICAgICAgIHZhciBvVGFiID0gX3RoaXMuX2dldFRhYih0YWJSZWYpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhIHRhYiBpcyBmb3VuZCB0aGF0IG1hdGNoZXMgdGhlIGhhc2hcbiAgICAgICAgICAgIGlmKHRhYlJlZiA+PSAwICYmICFvVGFiLl9pZ25vcmVIYXNoQ2hhbmdlICYmICFvVGFiLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgc28sIG9wZW4gdGhlIHRhYiBhbmQgYXV0byBjbG9zZSB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICBfdGhpcy5fb3BlblRhYihlLCBfdGhpcy5fZ2V0VGFiKHRhYlJlZiksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCByb3RhdGUgZXZlbnQgaWYgcm90YXRlIG9wdGlvbiBpcyBkZWZpbmVkXG4gICAgICAgIGlmKHRoaXMub3B0aW9ucy5yb3RhdGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0Um90YXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBmbHVpZCBoZWlnaHRcbiAgICAgICAgaWYodGhpcy5vcHRpb25zLmZsdWlkSGVpZ2h0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBfdGhpcy5fZXF1YWxpc2VIZWlnaHRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBEZWZpbmUgcGx1Z2luIGV2ZW50c1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vIEFjdGl2YXRlOiB0aGlzIGV2ZW50IGlzIGNhbGxlZCB3aGVuIGEgdGFiIGlzIHNlbGVjdGVkXG4gICAgICAgIHRoaXMuJGVsZW1lbnQuYmluZCgndGFicy1jbGljaycsIGZ1bmN0aW9uKGUsIG9UYWIpIHtcbiAgICAgICAgICAgIF90aGlzLm9wdGlvbnMuY2xpY2suY2FsbCh0aGlzLCBlLCBvVGFiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWN0aXZhdGU6IHRoaXMgZXZlbnQgaXMgY2FsbGVkIHdoZW4gYSB0YWIgaXMgc2VsZWN0ZWRcbiAgICAgICAgdGhpcy4kZWxlbWVudC5iaW5kKCd0YWJzLWFjdGl2YXRlJywgZnVuY3Rpb24oZSwgb1RhYikge1xuICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5hY3RpdmF0ZS5jYWxsKHRoaXMsIGUsIG9UYWIpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gRGVhY3RpdmF0ZTogdGhpcyBldmVudCBpcyBjYWxsZWQgd2hlbiBhIHRhYiBpcyBjbG9zZWRcbiAgICAgICAgdGhpcy4kZWxlbWVudC5iaW5kKCd0YWJzLWRlYWN0aXZhdGUnLCBmdW5jdGlvbihlLCBvVGFiKSB7XG4gICAgICAgICAgICBfdGhpcy5vcHRpb25zLmRlYWN0aXZhdGUuY2FsbCh0aGlzLCBlLCBvVGFiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFjdGl2YXRlIFN0YXRlOiB0aGlzIGV2ZW50IGlzIGNhbGxlZCB3aGVuIHRoZSBwbHVnaW4gc3dpdGNoZXMgc3RhdGVzXG4gICAgICAgIHRoaXMuJGVsZW1lbnQuYmluZCgndGFicy1hY3RpdmF0ZS1zdGF0ZScsIGZ1bmN0aW9uKGUsIHN0YXRlKSB7XG4gICAgICAgICAgICBfdGhpcy5vcHRpb25zLmFjdGl2YXRlU3RhdGUuY2FsbCh0aGlzLCBlLCBzdGF0ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIExvYWQ6IHRoaXMgZXZlbnQgaXMgY2FsbGVkIHdoZW4gdGhlIHBsdWdpbiBoYXMgYmVlbiBsb2FkZWRcbiAgICAgICAgdGhpcy4kZWxlbWVudC5iaW5kKCd0YWJzLWxvYWQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRUYWI7XG5cbiAgICAgICAgICAgIF90aGlzLl9zZXRTdGF0ZShlKTsgLy8gU2V0IHN0YXRlXG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwYW5lbCBzaG91bGQgYmUgY29sbGFwZWQgb24gbG9hZFxuICAgICAgICAgICAgaWYoX3RoaXMub3B0aW9ucy5zdGFydENvbGxhcHNlZCAhPT0gdHJ1ZSAmJiAhKF90aGlzLm9wdGlvbnMuc3RhcnRDb2xsYXBzZWQgPT09ICdhY2NvcmRpb24nICYmIF90aGlzLnN0YXRlID09PSAnYWNjb3JkaW9uJykpIHtcblxuICAgICAgICAgICAgICAgIHN0YXJ0VGFiID0gX3RoaXMuX2dldFN0YXJ0VGFiKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBPcGVuIHRoZSBpbml0aWFsIHRhYlxuICAgICAgICAgICAgICAgIF90aGlzLl9vcGVuVGFiKGUsIHN0YXJ0VGFiKTsgLy8gT3BlbiBmaXJzdCB0YWJcblxuICAgICAgICAgICAgICAgIC8vIENhbGwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5sb2FkLmNhbGwodGhpcywgZSwgc3RhcnRUYWIpOyAvLyBDYWxsIHRoZSBsb2FkIGNhbGxiYWNrXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUcmlnZ2VyIGxvYWRlZCBldmVudFxuICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ3RhYnMtbG9hZCcpO1xuICAgIH07XG5cbiAgICAvL1xuICAgIC8vIFBSSVZBVEUgRlVOQ1RJT05TXG4gICAgLy9cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gbG9hZHMgdGhlIHRhYiBlbGVtZW50cyBhbmQgc3RvcmVzIHRoZW0gaW4gYW4gYXJyYXlcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIHRhYiBlbGVtZW50c1xuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fbG9hZEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciAkdWwgPSB0aGlzLiRlbGVtZW50LmNoaWxkcmVuKCd1bDpmaXJzdCcpO1xuICAgICAgICB2YXIgdGFicyA9IFtdO1xuICAgICAgICB2YXIgaWQgPSAwO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgY2xhc3NlcyB0byB0aGUgYmFzaWMgaHRtbCBlbGVtZW50c1xuICAgICAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKF90aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb250YWluZXIpOyAvLyBUYWIgY29udGFpbmVyXG4gICAgICAgICR1bC5hZGRDbGFzcyhfdGhpcy5vcHRpb25zLmNsYXNzZXMudWwpOyAvLyBMaXN0IGNvbnRhaW5lclxuXG4gICAgICAgIC8vIEdldCB0YWIgYnV0dG9ucyBhbmQgc3RvcmUgdGhlaXIgZGF0YSBpbiBhbiBhcnJheVxuICAgICAgICAkKCdsaScsICR1bCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGFiID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBpc0V4Y2x1ZGVkID0gJHRhYi5oYXNDbGFzcyhfdGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVFeGNsdWRlZCk7XG4gICAgICAgICAgICB2YXIgJGFuY2hvciwgJHBhbmVsLCAkYWNjb3JkaW9uVGFiLCAkYWNjb3JkaW9uQW5jaG9yLCBwYW5lbFNlbGVjdG9yO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFiIHNob3VsZCBiZSBleGNsdWRlZFxuICAgICAgICAgICAgaWYoIWlzRXhjbHVkZWQpIHtcblxuICAgICAgICAgICAgICAgICRhbmNob3IgPSAkKCdhJywgJHRhYik7XG4gICAgICAgICAgICAgICAgcGFuZWxTZWxlY3RvciA9ICRhbmNob3IuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgICRwYW5lbCA9ICQocGFuZWxTZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgJGFjY29yZGlvblRhYiA9ICQoX3RoaXMub3B0aW9ucy5hY2NvcmRpb25UYWJFbGVtZW50KS5pbnNlcnRCZWZvcmUoJHBhbmVsKTtcbiAgICAgICAgICAgICAgICAkYWNjb3JkaW9uQW5jaG9yID0gJCgnPGE+PC9hPicpLmF0dHIoJ2hyZWYnLCBwYW5lbFNlbGVjdG9yKS5odG1sKCRhbmNob3IuaHRtbCgpKS5hcHBlbmRUbygkYWNjb3JkaW9uVGFiKTtcblxuICAgICAgICAgICAgICAgIHZhciBvVGFiID0ge1xuICAgICAgICAgICAgICAgICAgICBfaWdub3JlSGFzaENoYW5nZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICgkLmluQXJyYXkoaWQsIF90aGlzLm9wdGlvbnMuZGlzYWJsZWQpICE9PSAtMSksXG4gICAgICAgICAgICAgICAgICAgIHRhYjogJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiAkKCdhJywgJHRhYiksXG4gICAgICAgICAgICAgICAgICAgIHBhbmVsOiAkcGFuZWwsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBwYW5lbFNlbGVjdG9yLFxuICAgICAgICAgICAgICAgICAgICBhY2NvcmRpb25UYWI6ICRhY2NvcmRpb25UYWIsXG4gICAgICAgICAgICAgICAgICAgIGFjY29yZGlvbkFuY2hvcjogJGFjY29yZGlvbkFuY2hvcixcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyAxdXAgdGhlIElEXG4gICAgICAgICAgICAgICAgaWQrKztcbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gdGFiIGFycmF5XG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKG9UYWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRhYnM7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBhZGRzIGNsYXNzZXMgdG8gdGhlIHRhYiBlbGVtZW50cyBiYXNlZCBvbiB0aGUgb3B0aW9uc1xuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fbG9hZENsYXNzZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMudGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50YWJzW2ldLnRhYi5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZURlZmF1bHQpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzLnRhYik7XG4gICAgICAgICAgICB0aGlzLnRhYnNbaV0uYW5jaG9yLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzLmFuY2hvcik7XG4gICAgICAgICAgICB0aGlzLnRhYnNbaV0ucGFuZWwuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEZWZhdWx0KS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbCk7XG4gICAgICAgICAgICB0aGlzLnRhYnNbaV0uYWNjb3JkaW9uVGFiLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzLmFjY29yZGlvblRpdGxlKTtcbiAgICAgICAgICAgIHRoaXMudGFic1tpXS5hY2NvcmRpb25BbmNob3IuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuYW5jaG9yKTtcbiAgICAgICAgICAgIGlmKHRoaXMudGFic1tpXS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFic1tpXS50YWIucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEZWZhdWx0KS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZURpc2FibGVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaV0uYWNjb3JkaW9uVGFiLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlRGVmYXVsdCkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEaXNhYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBhZGRzIGV2ZW50cyB0byB0aGUgdGFiIGVsZW1lbnRzXG4gICAgICovXG4gICAgUmVzcG9uc2l2ZVRhYnMucHJvdG90eXBlLl9sb2FkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgLy8gRGVmaW5lIGFjdGl2YXRlIGV2ZW50IG9uIGEgdGFiIGVsZW1lbnRcbiAgICAgICAgdmFyIGZBY3RpdmF0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gX3RoaXMuX2dldEN1cnJlbnRUYWIoKTsgLy8gRmV0Y2ggY3VycmVudCB0YWJcbiAgICAgICAgICAgIHZhciBhY3RpdmF0ZWRUYWIgPSBlLmRhdGEudGFiO1xuXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgY2xpY2sgZXZlbnQgZm9yIHdoZW5ldmVyIGEgdGFiIGlzIGNsaWNrZWQvdG91Y2hlZCBldmVuIGlmIHRoZSB0YWIgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgIGFjdGl2YXRlZFRhYi50YWIudHJpZ2dlcigndGFicy1jbGljaycsIGFjdGl2YXRlZFRhYik7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHRhYiBpc24ndCBkaXNhYmxlZFxuICAgICAgICAgICAgaWYoIWFjdGl2YXRlZFRhYi5kaXNhYmxlZCkge1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaGFzaCBoYXMgdG8gYmUgc2V0IGluIHRoZSBVUkwgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBpZihfdGhpcy5vcHRpb25zLnNldEhhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBoYXNoIHVzaW5nIHRoZSBoaXN0b3J5IGFwaSBpZiBhdmFpbGFibGUgdG8gdGFja2xlIENocm9tZXMgcmVwYWludCBidWcgb24gaGFzaCBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYoaGlzdG9yeS5wdXNoU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpeCBmb3IgbWlzc2luZyB3aW5kb3cubG9jYXRpb24ub3JpZ2luIGluIElFXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyBhY3RpdmF0ZWRUYWIuc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGZhbGxiYWNrIHRvIHRoZSBoYXNoIHVwZGF0ZSBmb3Igc2l0ZXMgdGhhdCBkb24ndCBzdXBwb3J0IHRoZSBoaXN0b3J5IGFwaVxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBhY3RpdmF0ZWRUYWIuc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlLmRhdGEudGFiLl9pZ25vcmVIYXNoQ2hhbmdlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBhY3RpdmF0ZWQgdGFiIGlzbnQgdGhlIGN1cnJlbnQgb25lIG9yIGlmIGl0cyBjb2xsYXBzaWJsZS4gSWYgbm90LCBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgaWYoY3VycmVudCAhPT0gYWN0aXZhdGVkVGFiIHx8IF90aGlzLl9pc0NvbGxhcGlzYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFjdGl2YXRlZCB0YWIgaXMgZWl0aGVyIGFub3RoZXIgdGFiIG9mIHRoZSBjdXJyZW50IG9uZS4gSWYgaXQncyB0aGUgY3VycmVudCB0YWIgaXQgaXMgY29sbGFwc2libGVcbiAgICAgICAgICAgICAgICAgICAgLy8gRWl0aGVyIHdheSwgdGhlIGN1cnJlbnQgdGFiIGNhbiBiZSBjbG9zZWRcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Nsb3NlVGFiKGUsIGN1cnJlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBhY3RpdmF0ZWQgdGFiIGlzbnQgdGhlIGN1cnJlbnQgb25lIG9yIGlmIGl0IGlzbnQgY29sbGFwc2libGVcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudCAhPT0gYWN0aXZhdGVkVGFiIHx8ICFfdGhpcy5faXNDb2xsYXBpc2JsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb3BlblRhYihlLCBhY3RpdmF0ZWRUYWIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBMb29wIHRhYnNcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMudGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gQWRkIGFjdGl2YXRlIGZ1bmN0aW9uIHRvIHRoZSB0YWIgYW5kIGFjY29yZGlvbiBzZWxlY3Rpb24gZWxlbWVudFxuICAgICAgICAgICAgdGhpcy50YWJzW2ldLmFuY2hvci5vbihfdGhpcy5vcHRpb25zLmV2ZW50LCB7dGFiOiBfdGhpcy50YWJzW2ldfSwgZkFjdGl2YXRlKTtcbiAgICAgICAgICAgIHRoaXMudGFic1tpXS5hY2NvcmRpb25BbmNob3Iub24oX3RoaXMub3B0aW9ucy5ldmVudCwge3RhYjogX3RoaXMudGFic1tpXX0sIGZBY3RpdmF0ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIHRoZSB0YWIgdGhhdCBzaG91bGQgYmUgb3BlbmVkIGF0IHN0YXJ0XG4gICAgICogQHJldHVybnMge09iamVjdH0gVGFiIG9iamVjdFxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fZ2V0U3RhcnRUYWIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRhYlJlZiA9IHRoaXMuX2dldFRhYlJlZkJ5U2VsZWN0b3Iod2luZG93LmxvY2F0aW9uLmhhc2gpO1xuICAgICAgICB2YXIgc3RhcnRUYWI7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBhZ2UgaGFzIGEgaGFzaCBzZXQgdGhhdCBpcyBsaW5rZWQgdG8gYSB0YWJcbiAgICAgICAgaWYodGFiUmVmID49IDAgJiYgIXRoaXMuX2dldFRhYih0YWJSZWYpLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAvLyBJZiBzbywgc2V0IHRoZSBjdXJyZW50IHRhYiB0byB0aGUgbGlua2VkIHRhYlxuICAgICAgICAgICAgc3RhcnRUYWIgPSB0aGlzLl9nZXRUYWIodGFiUmVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMub3B0aW9ucy5hY3RpdmUgPiAwICYmICF0aGlzLl9nZXRUYWIodGhpcy5vcHRpb25zLmFjdGl2ZSkuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHN0YXJ0VGFiID0gdGhpcy5fZ2V0VGFiKHRoaXMub3B0aW9ucy5hY3RpdmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgbm90LCBqdXN0IGdldCB0aGUgZmlyc3Qgb25lXG4gICAgICAgICAgICBzdGFydFRhYiA9IHRoaXMuX2dldFRhYigwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdGFydFRhYjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBzZXRzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwbHVnaW5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlIC0gVGhlIGV2ZW50IHRoYXQgdHJpZ2dlcnMgdGhlIHN0YXRlIGNoYW5nZVxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fc2V0U3RhdGUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciAkdWwgPSAkKCd1bDpmaXJzdCcsIHRoaXMuJGVsZW1lbnQpO1xuICAgICAgICB2YXIgb2xkU3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgc3RhcnRDb2xsYXBzZWRJc1N0YXRlID0gKHR5cGVvZiB0aGlzLm9wdGlvbnMuc3RhcnRDb2xsYXBzZWQgPT09ICdzdHJpbmcnKTtcbiAgICAgICAgdmFyIHN0YXJ0VGFiO1xuXG4gICAgICAgIC8vIFRoZSBzdGF0ZSBpcyBiYXNlZCBvbiB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgdGFicyBsaXN0XG4gICAgICAgIGlmKCR1bC5pcygnOnZpc2libGUnKSl7XG4gICAgICAgICAgICAvLyBUYWIgbGlzdCBpcyB2aXNpYmxlLCBzbyB0aGUgc3RhdGUgaXMgJ3RhYnMnXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gJ3RhYnMnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGFiIGxpc3QgaXMgaW52aXNpYmxlLCBzbyB0aGUgc3RhdGUgaXMgJ2FjY29yZGlvbidcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnYWNjb3JkaW9uJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBuZXcgc3RhdGUgaXMgZGlmZmVyZW50IGZyb20gdGhlIG9sZCBzdGF0ZVxuICAgICAgICBpZih0aGlzLnN0YXRlICE9PSBvbGRTdGF0ZSkge1xuICAgICAgICAgICAgLy8gSWYgc28sIHRoZSBzdGF0ZSBhY3RpdmF0ZSB0cmlnZ2VyIG11c3QgYmUgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ3RhYnMtYWN0aXZhdGUtc3RhdGUnLCB7b2xkU3RhdGU6IG9sZFN0YXRlLCBuZXdTdGF0ZTogdGhpcy5zdGF0ZX0pO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc3RhdGUgc3dpdGNoIHNob3VsZCBvcGVuIGEgdGFiXG4gICAgICAgICAgICBpZihvbGRTdGF0ZSAmJiBzdGFydENvbGxhcHNlZElzU3RhdGUgJiYgdGhpcy5vcHRpb25zLnN0YXJ0Q29sbGFwc2VkICE9PSB0aGlzLnN0YXRlICYmIHRoaXMuX2dldEN1cnJlbnRUYWIoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGluaXRpYWwgdGFiXG4gICAgICAgICAgICAgICAgc3RhcnRUYWIgPSB0aGlzLl9nZXRTdGFydFRhYihlKTtcbiAgICAgICAgICAgICAgICAvLyBPcGVuIHRoZSBpbml0aWFsIHRhYlxuICAgICAgICAgICAgICAgIHRoaXMuX29wZW5UYWIoZSwgc3RhcnRUYWIpOyAvLyBPcGVuIGZpcnN0IHRhYlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gb3BlbnMgYSB0YWJcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlIC0gVGhlIGV2ZW50IHRoYXQgdHJpZ2dlcnMgdGhlIHRhYiBvcGVuaW5nXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9UYWIgLSBUaGUgdGFiIG9iamVjdCB0aGF0IHNob3VsZCBiZSBvcGVuZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGNsb3NlQ3VycmVudCAtIERlZmluZXMgaWYgdGhlIGN1cnJlbnQgdGFiIHNob3VsZCBiZSBjbG9zZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHN0b3BSb3RhdGlvbiAtIERlZmluZXMgaWYgdGhlIHRhYiByb3RhdGlvbiBsb29wIHNob3VsZCBiZSBzdG9wcGVkXG4gICAgICovXG4gICAgUmVzcG9uc2l2ZVRhYnMucHJvdG90eXBlLl9vcGVuVGFiID0gZnVuY3Rpb24oZSwgb1RhYiwgY2xvc2VDdXJyZW50LCBzdG9wUm90YXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNjcm9sbE9mZnNldDtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCB0YWIgaGFzIHRvIGJlIGNsb3NlZFxuICAgICAgICBpZihjbG9zZUN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NlVGFiKGUsIHRoaXMuX2dldEN1cnJlbnRUYWIoKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcm90YXRpb24gaGFzIHRvIGJlIHN0b3BwZWQgd2hlbiBhY3RpdmF0ZWRcbiAgICAgICAgaWYoc3RvcFJvdGF0aW9uICYmIHRoaXMucm90YXRlSW50ZXJ2YWwgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BSb3RhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoaXMgdGFiIHRvIGFjdGl2ZVxuICAgICAgICBvVGFiLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIC8vIFNldCBhY3RpdmUgY2xhc3NlcyB0byB0aGUgdGFiIGJ1dHRvbiBhbmQgYWNjb3JkaW9uIHRhYiBidXR0b25cbiAgICAgICAgb1RhYi50YWIucmVtb3ZlQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlRGVmYXVsdCkuYWRkQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlQWN0aXZlKTtcbiAgICAgICAgb1RhYi5hY2NvcmRpb25UYWIucmVtb3ZlQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlRGVmYXVsdCkuYWRkQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlQWN0aXZlKTtcblxuICAgICAgICAvLyBSdW4gcGFuZWwgdHJhbnNpdG9uXG4gICAgICAgIF90aGlzLl9kb1RyYW5zaXRpb24ob1RhYi5wYW5lbCwgX3RoaXMub3B0aW9ucy5hbmltYXRpb24sICdvcGVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsT25Mb2FkID0gKGUudHlwZSAhPT0gJ3RhYnMtbG9hZCcgfHwgX3RoaXMub3B0aW9ucy5zY3JvbGxUb0FjY29yZGlvbk9uTG9hZCk7XG5cbiAgICAgICAgICAgIC8vIFdoZW4gZmluaXNoZWQsIHNldCBhY3RpdmUgY2xhc3MgdG8gdGhlIHBhbmVsXG4gICAgICAgICAgICBvVGFiLnBhbmVsLnJlbW92ZUNsYXNzKF90aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZURlZmF1bHQpLmFkZENsYXNzKF90aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZUFjdGl2ZSk7XG5cbiAgICAgICAgICAgIC8vIEFuZCBpZiBlbmFibGVkIGFuZCBzdGF0ZSBpcyBhY2NvcmRpb24sIHNjcm9sbCB0byB0aGUgYWNjb3JkaW9uIHRhYlxuICAgICAgICAgICAgaWYoX3RoaXMuZ2V0U3RhdGUoKSA9PT0gJ2FjY29yZGlvbicgJiYgX3RoaXMub3B0aW9ucy5zY3JvbGxUb0FjY29yZGlvbiAmJiAoIV90aGlzLl9pc0luVmlldyhvVGFiLmFjY29yZGlvblRhYikgfHwgX3RoaXMub3B0aW9ucy5hbmltYXRpb24gIT09ICdkZWZhdWx0JykgJiYgc2Nyb2xsT25Mb2FkKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgb2Zmc2V0IGVsZW1lbnQncyBoZWlnaHQgdG8gc2Nyb2xsIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gb1RhYi5hY2NvcmRpb25UYWIub2Zmc2V0KCkudG9wIC0gX3RoaXMub3B0aW9ucy5zY3JvbGxUb0FjY29yZGlvbk9mZnNldDtcblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBhbmltYXRpb24gb3B0aW9uIGlzIGVuYWJsZWQsIGFuZCBpZiB0aGUgZHVyYXRpb24gaXNuJ3QgMFxuICAgICAgICAgICAgICAgIGlmKF90aGlzLm9wdGlvbnMuYW5pbWF0aW9uICE9PSAnZGVmYXVsdCcgJiYgX3RoaXMub3B0aW9ucy5kdXJhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgc28sIHNldCBzY3JvbGxUb3Agd2l0aCBhbmltYXRlIGFuZCB1c2UgdGhlICdhbmltYXRpb24nIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIH0sIF90aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICBJZiBub3QsIGp1c3Qgc2V0IHNjcm9sbFRvcFxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKHNjcm9sbE9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ3RhYnMtYWN0aXZhdGUnLCBvVGFiKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjbG9zZXMgYSB0YWJcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlIC0gVGhlIGV2ZW50IHRoYXQgaXMgdHJpZ2dlcmVkIHdoZW4gYSB0YWIgaXMgY2xvc2VkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9UYWIgLSBUaGUgdGFiIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjbG9zZWRcbiAgICAgKi9cbiAgICBSZXNwb25zaXZlVGFicy5wcm90b3R5cGUuX2Nsb3NlVGFiID0gZnVuY3Rpb24oZSwgb1RhYikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZG9RdWV1ZU9uU3RhdGUgPSB0eXBlb2YgX3RoaXMub3B0aW9ucy5hbmltYXRpb25RdWV1ZSA9PT0gJ3N0cmluZyc7XG4gICAgICAgIHZhciBkb1F1ZXVlO1xuXG4gICAgICAgIGlmKG9UYWIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYoZG9RdWV1ZU9uU3RhdGUgJiYgX3RoaXMuZ2V0U3RhdGUoKSA9PT0gX3RoaXMub3B0aW9ucy5hbmltYXRpb25RdWV1ZSkge1xuICAgICAgICAgICAgICAgIGRvUXVldWUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRvUXVldWVPblN0YXRlKSB7XG4gICAgICAgICAgICAgICAgZG9RdWV1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb1F1ZXVlID0gX3RoaXMub3B0aW9ucy5hbmltYXRpb25RdWV1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGVhY3RpdmF0ZSB0YWJcbiAgICAgICAgICAgIG9UYWIuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCBjbGFzcyB0byB0aGUgdGFiIGJ1dHRvblxuICAgICAgICAgICAgb1RhYi50YWIucmVtb3ZlQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlQWN0aXZlKS5hZGRDbGFzcyhfdGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEZWZhdWx0KTtcblxuICAgICAgICAgICAgLy8gUnVuIHBhbmVsIHRyYW5zaXRpb25cbiAgICAgICAgICAgIF90aGlzLl9kb1RyYW5zaXRpb24ob1RhYi5wYW5lbCwgX3RoaXMub3B0aW9ucy5hbmltYXRpb24sICdjbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIFNldCBkZWZhdWx0IGNsYXNzIHRvIHRoZSBhY2NvcmRpb24gdGFiIGJ1dHRvbiBhbmQgdGFiIHBhbmVsXG4gICAgICAgICAgICAgICAgb1RhYi5hY2NvcmRpb25UYWIucmVtb3ZlQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlQWN0aXZlKS5hZGRDbGFzcyhfdGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEZWZhdWx0KTtcbiAgICAgICAgICAgICAgICBvVGFiLnBhbmVsLnJlbW92ZUNsYXNzKF90aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZUFjdGl2ZSkuYWRkQ2xhc3MoX3RoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlRGVmYXVsdCk7XG4gICAgICAgICAgICB9LCAhZG9RdWV1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcigndGFicy1kZWFjdGl2YXRlJywgb1RhYik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBydW5zIGFuIGVmZmVjdCBvbiBhIHBhbmVsXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBwYW5lbCAtIFRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIHRhYiBwYW5lbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgLSBUaGUgdHJhbnNpdGlvbiBtZXRob2QgcmVmZXJlbmNlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXRlIC0gVGhlIHN0YXRlIChvcGVuL2Nsb3NlZCkgdGhhdCB0aGUgcGFuZWwgc2hvdWxkIHRyYW5zaXRpb24gdG9cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBhZnRlciB0aGUgdHJhbnNpdGlvblxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVxdWV1ZSAtIERlZmluZXMgaWYgdGhlIGV2ZW50IHF1ZXVlIHNob3VsZCBiZSBkZXF1ZXVlZCBhZnRlciB0aGUgdHJhbnNpdGlvblxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fZG9UcmFuc2l0aW9uID0gZnVuY3Rpb24ocGFuZWwsIG1ldGhvZCwgc3RhdGUsIGNhbGxiYWNrLCBkZXF1ZXVlKSB7XG4gICAgICAgIHZhciBlZmZlY3Q7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgLy8gR2V0IGVmZmVjdCBiYXNlZCBvbiBtZXRob2RcbiAgICAgICAgc3dpdGNoKG1ldGhvZCkge1xuICAgICAgICAgICAgY2FzZSAnc2xpZGUnOlxuICAgICAgICAgICAgICAgIGVmZmVjdCA9IChzdGF0ZSA9PT0gJ29wZW4nKSA/ICdzbGlkZURvd24nIDogJ3NsaWRlVXAnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZmFkZSc6XG4gICAgICAgICAgICAgICAgZWZmZWN0ID0gKHN0YXRlID09PSAnb3BlbicpID8gJ2ZhZGVJbicgOiAnZmFkZU91dCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGVmZmVjdCA9IChzdGF0ZSA9PT0gJ29wZW4nKSA/ICdzaG93JyA6ICdoaWRlJztcbiAgICAgICAgICAgICAgICAvLyBXaGVuIGRlZmF1bHQgaXMgdXNlZCwgc2V0IHRoZSBkdXJhdGlvbiB0byAwXG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5kdXJhdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgdGhlIHRyYW5zaXRpb24gdG8gYSBjdXN0b20gcXVldWVcbiAgICAgICAgdGhpcy4kcXVldWUucXVldWUoJ3Jlc3BvbnNpdmUtdGFicycsZnVuY3Rpb24obmV4dCl7XG4gICAgICAgICAgICAvLyBSdW4gdGhlIHRyYW5zaXRpb24gb24gdGhlIHBhbmVsXG4gICAgICAgICAgICBwYW5lbFtlZmZlY3RdKHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogX3RoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwocGFuZWwsIG1ldGhvZCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBSdW4gdGhlIG5leHQgZnVuY3Rpb24gaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV2hlbiB0aGUgcGFuZWwgaXMgb3BlbmVuZCwgZGVxdWV1ZSBldmVyeXRoaW5nIHNvIHRoZSBhbmltYXRpb24gc3RhcnRzXG4gICAgICAgIGlmKHN0YXRlID09PSAnb3BlbicgfHwgZGVxdWV1ZSkge1xuICAgICAgICAgICAgdGhpcy4kcXVldWUuZGVxdWV1ZSgncmVzcG9uc2l2ZS10YWJzJyk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGNvbGxhcHNpYmlsaXR5IG9mIHRoZSB0YWIgaW4gdGhpcyBzdGF0ZVxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBUaGUgY29sbGFwc2liaWxpdHkgb2YgdGhlIHRhYlxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5faXNDb2xsYXBpc2JsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKHR5cGVvZiB0aGlzLm9wdGlvbnMuY29sbGFwc2libGUgPT09ICdib29sZWFuJyAmJiB0aGlzLm9wdGlvbnMuY29sbGFwc2libGUpIHx8ICh0eXBlb2YgdGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlID09PSAnc3RyaW5nJyAmJiB0aGlzLm9wdGlvbnMuY29sbGFwc2libGUgPT09IHRoaXMuZ2V0U3RhdGUoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHRhYiBieSBudW1lcmljIHJlZmVyZW5jZVxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gbnVtUmVmIC0gTnVtZXJpYyB0YWIgcmVmZXJlbmNlXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGFiIG9iamVjdFxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fZ2V0VGFiID0gZnVuY3Rpb24obnVtUmVmKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYnNbbnVtUmVmXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBudW1lcmljIHRhYiByZWZlcmVuY2UgYmFzZWQgb24gYSBoYXNoIHNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIC0gSGFzaCBzZWxlY3RvclxuICAgICAqIEByZXR1cm5zIHtJbnRlZ2VyfSBOdW1lcmljIHRhYiByZWZlcmVuY2VcbiAgICAgKi9cbiAgICBSZXNwb25zaXZlVGFicy5wcm90b3R5cGUuX2dldFRhYlJlZkJ5U2VsZWN0b3IgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICAvLyBMb29wIGFsbCB0YWJzXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTx0aGlzLnRhYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBoYXNoIHNlbGVjdG9yIGlzIGVxdWFsIHRvIHRoZSB0YWIgc2VsZWN0b3JcbiAgICAgICAgICAgIGlmKHRoaXMudGFic1tpXS5zZWxlY3RvciA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBub25lIGlzIGZvdW5kIHJldHVybiBhIG5lZ2F0aXZlIGluZGV4XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBjdXJyZW50IHRhYiBlbGVtZW50XG4gICAgICogQHJldHVybnMge09iamVjdH0gQ3VycmVudCB0YWIgZWxlbWVudFxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fZ2V0Q3VycmVudFRhYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VGFiKHRoaXMuX2dldEN1cnJlbnRUYWJSZWYoKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgbmV4dCB0YWIncyBudW1lcmljIHJlZmVyZW5jZVxuICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gY3VycmVudFRhYlJlZiAtIEN1cnJlbnQgbnVtZXJpYyB0YWIgcmVmZXJlbmNlXG4gICAgICogQHJldHVybnMge0ludGVnZXJ9IE51bWVyaWMgdGFiIHJlZmVyZW5jZVxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fZ2V0TmV4dFRhYlJlZiA9IGZ1bmN0aW9uKGN1cnJlbnRUYWJSZWYpIHtcbiAgICAgICAgdmFyIHRhYlJlZiA9IChjdXJyZW50VGFiUmVmIHx8IHRoaXMuX2dldEN1cnJlbnRUYWJSZWYoKSk7XG4gICAgICAgIHZhciBuZXh0VGFiUmVmID0gKHRhYlJlZiA9PT0gdGhpcy50YWJzLmxlbmd0aCAtIDEpID8gMCA6IHRhYlJlZiArIDE7XG4gICAgICAgIHJldHVybiAodGhpcy5fZ2V0VGFiKG5leHRUYWJSZWYpLmRpc2FibGVkKSA/IHRoaXMuX2dldE5leHRUYWJSZWYobmV4dFRhYlJlZikgOiBuZXh0VGFiUmVmO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHByZXZpb3VzIHRhYidzIG51bWVyaWMgcmVmZXJlbmNlXG4gICAgICogQHJldHVybnMge0ludGVnZXJ9IE51bWVyaWMgdGFiIHJlZmVyZW5jZVxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5fZ2V0UHJldmlvdXNUYWJSZWYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9nZXRDdXJyZW50VGFiUmVmKCkgPT09IDApID8gdGhpcy50YWJzLmxlbmd0aCAtIDEgOiB0aGlzLl9nZXRDdXJyZW50VGFiUmVmKCkgLSAxO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGN1cnJlbnQgdGFiJ3MgbnVtZXJpYyByZWZlcmVuY2VcbiAgICAgKiBAcmV0dXJucyB7SW50ZWdlcn0gTnVtZXJpYyB0YWIgcmVmZXJlbmNlXG4gICAgICovXG4gICAgUmVzcG9uc2l2ZVRhYnMucHJvdG90eXBlLl9nZXRDdXJyZW50VGFiUmVmID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIExvb3AgYWxsIHRhYnNcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMudGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyB0YWIgaXMgYWN0aXZlLCByZXR1cm4gaXRcbiAgICAgICAgICAgIGlmKHRoaXMudGFic1tpXS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBObyB0YWJzIGhhdmUgYmVlbiBmb3VuZCwgcmV0dXJuIG5lZ2F0aXZlIGluZGV4XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIHRoZSB0YWxsZXN0IHRhYiBhbmQgYXBwbGllZCB0aGUgaGVpZ2h0IHRvIGFsbCB0YWJzXG4gICAgICovXG4gICAgUmVzcG9uc2l2ZVRhYnMucHJvdG90eXBlLl9lcXVhbGlzZUhlaWdodHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1heEhlaWdodCA9IDA7XG5cbiAgICAgICAgJC5lYWNoKCQubWFwKHRoaXMudGFicywgZnVuY3Rpb24odGFiKSB7XG4gICAgICAgICAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsIHRhYi5wYW5lbC5jc3MoJ21pbkhlaWdodCcsICcnKS5oZWlnaHQoKSk7XG4gICAgICAgICAgICByZXR1cm4gdGFiLnBhbmVsO1xuICAgICAgICB9KSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmNzcygnbWluSGVpZ2h0JywgbWF4SGVpZ2h0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vXG4gICAgLy8gSEVMUEVSIEZVTkNUSU9OU1xuICAgIC8vXG5cbiAgICBSZXNwb25zaXZlVGFicy5wcm90b3R5cGUuX2lzSW5WaWV3ID0gZnVuY3Rpb24oJGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGRvY1ZpZXdUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBkb2NWaWV3Qm90dG9tID0gZG9jVmlld1RvcCArICQod2luZG93KS5oZWlnaHQoKSxcbiAgICAgICAgICAgIGVsZW1Ub3AgPSAkZWxlbWVudC5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICBlbGVtQm90dG9tID0gZWxlbVRvcCArICRlbGVtZW50LmhlaWdodCgpO1xuICAgICAgICByZXR1cm4gKChlbGVtQm90dG9tIDw9IGRvY1ZpZXdCb3R0b20pICYmIChlbGVtVG9wID49IGRvY1ZpZXdUb3ApKTtcbiAgICB9O1xuXG4gICAgLy9cbiAgICAvLyBQVUJMSUMgRlVOQ1RJT05TXG4gICAgLy9cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gYWN0aXZhdGVzIGEgdGFiXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSB0YWJSZWYgLSBOdW1lcmljIHRhYiByZWZlcmVuY2VcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHN0b3BSb3RhdGlvbiAtIERlZmluZXMgaWYgdGhlIHRhYiByb3RhdGlvbiBzaG91bGQgc3RvcCBhZnRlciBhY3RpdmF0aW9uXG4gICAgICovXG4gICAgUmVzcG9uc2l2ZVRhYnMucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24odGFiUmVmLCBzdG9wUm90YXRpb24pIHtcbiAgICAgICAgdmFyIGUgPSBqUXVlcnkuRXZlbnQoJ3RhYnMtYWN0aXZhdGUnKTtcbiAgICAgICAgdmFyIG9UYWIgPSB0aGlzLl9nZXRUYWIodGFiUmVmKTtcbiAgICAgICAgaWYoIW9UYWIuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX29wZW5UYWIoZSwgb1RhYiwgdHJ1ZSwgc3RvcFJvdGF0aW9uIHx8IHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZGVhY3RpdmF0ZXMgYSB0YWJcbiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IHRhYlJlZiAtIE51bWVyaWMgdGFiIHJlZmVyZW5jZVxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24odGFiUmVmKSB7XG4gICAgICAgIHZhciBlID0galF1ZXJ5LkV2ZW50KCd0YWJzLWRlY3RpdmF0ZScpO1xuICAgICAgICB2YXIgb1RhYiA9IHRoaXMuX2dldFRhYih0YWJSZWYpO1xuICAgICAgICBpZighb1RhYi5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5fY2xvc2VUYWIoZSwgb1RhYik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBlbmFibGVzIGEgdGFiXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSB0YWJSZWYgLSBOdW1lcmljIHRhYiByZWZlcmVuY2VcbiAgICAgKi9cbiAgICBSZXNwb25zaXZlVGFicy5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24odGFiUmVmKSB7XG4gICAgICAgIHZhciBvVGFiID0gdGhpcy5fZ2V0VGFiKHRhYlJlZik7XG4gICAgICAgIGlmKG9UYWIpe1xuICAgICAgICAgICAgb1RhYi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgb1RhYi50YWIuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEZWZhdWx0KS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZURpc2FibGVkKTtcbiAgICAgICAgICAgIG9UYWIuYWNjb3JkaW9uVGFiLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlRGVmYXVsdCkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkaXNhYmxlIGEgdGFiXG4gICAgICogQHBhcmFtIHtJbnRlZ2VyfSB0YWJSZWYgLSBOdW1lcmljIHRhYiByZWZlcmVuY2VcbiAgICAgKi9cbiAgICBSZXNwb25zaXZlVGFicy5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKHRhYlJlZikge1xuICAgICAgICB2YXIgb1RhYiA9IHRoaXMuX2dldFRhYih0YWJSZWYpO1xuICAgICAgICBpZihvVGFiKXtcbiAgICAgICAgICAgIG9UYWIuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgb1RhYi50YWIucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEZWZhdWx0KS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY2xhc3Nlcy5zdGF0ZURpc2FibGVkKTtcbiAgICAgICAgICAgIG9UYWIuYWNjb3JkaW9uVGFiLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5jbGFzc2VzLnN0YXRlRGVmYXVsdCkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMuc3RhdGVEaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwbHVnaW5cbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBTdGF0ZSBvZiB0aGUgcGx1Z2luXG4gICAgICovXG4gICAgUmVzcG9uc2l2ZVRhYnMucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHN0YXJ0cyB0aGUgcm90YXRpb24gb2YgdGhlIHRhYnNcbiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IHNwZWVkIC0gVGhlIHNwZWVkIG9mIHRoZSByb3RhdGlvblxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5zdGFydFJvdGF0aW9uID0gZnVuY3Rpb24oc3BlZWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIG5vdCBhbGwgdGFicyBhcmUgZGlzYWJsZWRcbiAgICAgICAgaWYodGhpcy50YWJzLmxlbmd0aCA+IHRoaXMub3B0aW9ucy5kaXNhYmxlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBlID0galF1ZXJ5LkV2ZW50KCdyb3RhdGUnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fb3BlblRhYihlLCBfdGhpcy5fZ2V0VGFiKF90aGlzLl9nZXROZXh0VGFiUmVmKCkpLCB0cnVlKTtcbiAgICAgICAgICAgIH0sIHNwZWVkIHx8ICgoJC5pc051bWVyaWMoX3RoaXMub3B0aW9ucy5yb3RhdGUpKSA/IF90aGlzLm9wdGlvbnMucm90YXRlIDogNDAwMCkgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJvdGF0aW9uIGlzIG5vdCBwb3NzaWJsZSBpZiBhbGwgdGFicyBhcmUgZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBzdG9wcyB0aGUgcm90YXRpb24gb2YgdGhlIHRhYnNcbiAgICAgKi9cbiAgICBSZXNwb25zaXZlVGFicy5wcm90b3R5cGUuc3RvcFJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMucm90YXRlSW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLnJvdGF0ZUludGVydmFsID0gMDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBnZXQvc2V0IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHthbnl9IE9wdGlvbiB2YWx1ZVxuICAgICAqL1xuICAgIFJlc3BvbnNpdmVUYWJzLnByb3RvdHlwZS5vcHRpb24gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNba2V5XTtcbiAgICB9O1xuXG4gICAgLyoqIGpRdWVyeSB3cmFwcGVyICovXG4gICAgJC5mbi5yZXNwb25zaXZlVGFicyA9IGZ1bmN0aW9uICggb3B0aW9ucyApIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHZhciBpbnN0YW5jZTtcblxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkLmRhdGEodGhpcywgJ3Jlc3BvbnNpdmV0YWJzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMsICdyZXNwb25zaXZldGFicycsIG5ldyBSZXNwb25zaXZlVGFicyggdGhpcywgb3B0aW9ucyApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgJiYgb3B0aW9uc1swXSAhPT0gJ18nICYmIG9wdGlvbnMgIT09ICdpbml0Jykge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSAkLmRhdGEodGhpc1swXSwgJ3Jlc3BvbnNpdmV0YWJzJyk7XG5cbiAgICAgICAgICAgIC8vIEFsbG93IGluc3RhbmNlcyB0byBiZSBkZXN0cm95ZWQgdmlhIHRoZSAnZGVzdHJveScgbWV0aG9kXG4gICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gJ2Rlc3Ryb3knKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogZGVzdHJveSBpbnN0YW5jZSBjbGFzc2VzLCBldGNcbiAgICAgICAgICAgICAgICAkLmRhdGEodGhpcywgJ3Jlc3BvbnNpdmV0YWJzJywgbnVsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSBpbnN0YW5jZW9mIFJlc3BvbnNpdmVUYWJzICYmIHR5cGVvZiBpbnN0YW5jZVtvcHRpb25zXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZVtvcHRpb25zXS5hcHBseSggaW5zdGFuY2UsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmdzLCAxICkgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG59KGpRdWVyeSwgd2luZG93KSk7XG4vKiFcclxuICogV2F2ZXMgdjAuNi40XHJcbiAqIGh0dHA6Ly9maWFuLm15LmlkL1dhdmVzXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDE0IEFsZmlhbmEgRS4gU2lidWVhIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9maWFucy9XYXZlcy9ibG9iL21hc3Rlci9MSUNFTlNFXHJcbiAqL1xyXG5cclxuOyhmdW5jdGlvbih3aW5kb3cpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgV2F2ZXMgPSBXYXZlcyB8fCB7fTtcclxuICAgIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XHJcblxyXG4gICAgLy8gRmluZCBleGFjdCBwb3NpdGlvbiBvZiBlbGVtZW50XHJcbiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRXaW5kb3coZWxlbSkge1xyXG4gICAgICAgIHJldHVybiBpc1dpbmRvdyhlbGVtKSA/IGVsZW0gOiBlbGVtLm5vZGVUeXBlID09PSA5ICYmIGVsZW0uZGVmYXVsdFZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb2Zmc2V0KGVsZW0pIHtcclxuICAgICAgICB2YXIgZG9jRWxlbSwgd2luLFxyXG4gICAgICAgICAgICBib3ggPSB7dG9wOiAwLCBsZWZ0OiAwfSxcclxuICAgICAgICAgICAgZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XHJcblxyXG4gICAgICAgIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSB0eXBlb2YgdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbiA9IGdldFdpbmRvdyhkb2MpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydFN0eWxlKG9iaikge1xyXG4gICAgICAgIHZhciBzdHlsZSA9ICcnO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBhIGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGEpKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZSArPSAoYSArICc6JyArIG9ialthXSArICc7Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgRWZmZWN0ID0ge1xyXG5cclxuICAgICAgICAvLyBFZmZlY3QgZGVsYXlcclxuICAgICAgICBkdXJhdGlvbjogNzUwLFxyXG5cclxuICAgICAgICBzaG93OiBmdW5jdGlvbihlLCBlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAvLyBEaXNhYmxlIHJpZ2h0IGNsaWNrXHJcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZWwgPSBlbGVtZW50IHx8IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgcmlwcGxlXHJcbiAgICAgICAgICAgIHZhciByaXBwbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9ICd3YXZlcy1yaXBwbGUnO1xyXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChyaXBwbGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IGNsaWNrIGNvb3JkaW5hdGUgYW5kIGVsZW1lbnQgd2l0ZGhcclxuICAgICAgICAgICAgdmFyIHBvcyAgICAgICAgID0gb2Zmc2V0KGVsKTtcclxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWSAgID0gKGUucGFnZVkgLSBwb3MudG9wKTtcclxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWCAgID0gKGUucGFnZVggLSBwb3MubGVmdCk7XHJcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9ICdzY2FsZSgnKygoZWwuY2xpZW50V2lkdGggLyAxMDApICogMTApKycpJztcclxuXHJcbiAgICAgICAgICAgIC8vIFN1cHBvcnQgZm9yIHRvdWNoIGRldmljZXNcclxuICAgICAgICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7XHJcbiAgICAgICAgICAgICAgcmVsYXRpdmVZICAgPSAoZS50b3VjaGVzWzBdLnBhZ2VZIC0gcG9zLnRvcCk7XHJcbiAgICAgICAgICAgICAgcmVsYXRpdmVYICAgPSAoZS50b3VjaGVzWzBdLnBhZ2VYIC0gcG9zLmxlZnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBdHRhY2ggZGF0YSB0byBlbGVtZW50XHJcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcsIERhdGUubm93KCkpO1xyXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXNjYWxlJywgc2NhbGUpO1xyXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXgnLCByZWxhdGl2ZVgpO1xyXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXknLCByZWxhdGl2ZVkpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHJpcHBsZSBwb3NpdGlvblxyXG4gICAgICAgICAgICB2YXIgcmlwcGxlU3R5bGUgPSB7XHJcbiAgICAgICAgICAgICAgICAndG9wJzogcmVsYXRpdmVZKydweCcsXHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHJlbGF0aXZlWCsncHgnXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZSArICcgd2F2ZXMtbm90cmFuc2l0aW9uJztcclxuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUocmlwcGxlU3R5bGUpKTtcclxuICAgICAgICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9IHJpcHBsZS5jbGFzc05hbWUucmVwbGFjZSgnd2F2ZXMtbm90cmFuc2l0aW9uJywgJycpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHJpcHBsZVxyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9IHNjYWxlO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2Zvcm0nXSA9IHNjYWxlO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1zLXRyYW5zZm9ybSddID0gc2NhbGU7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2Zvcm0nXSA9IHNjYWxlO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZS50cmFuc2Zvcm0gPSBzY2FsZTtcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGUub3BhY2l0eSAgID0gJzEnO1xyXG5cclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbiddID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbiddICAgID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nXSAgICAgID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJ3RyYW5zaXRpb24tZHVyYXRpb24nXSAgICAgICAgID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcclxuXHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gICAgPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddICAgICAgPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddICAgICAgICAgPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XHJcblxyXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNodXAoZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgd2lkdGggPSBlbC5jbGllbnRXaWR0aCAqIDEuNDtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCBmaXJzdCByaXBwbGVcclxuICAgICAgICAgICAgdmFyIHJpcHBsZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciByaXBwbGVzID0gZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd2F2ZXMtcmlwcGxlJyk7XHJcbiAgICAgICAgICAgIGlmIChyaXBwbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJpcHBsZSA9IHJpcHBsZXNbcmlwcGxlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWCAgID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XHJcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgICA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEteScpO1xyXG4gICAgICAgICAgICB2YXIgc2NhbGUgICAgICAgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXNjYWxlJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgZGVsYXkgYmVldHdlZW4gbW91c2Vkb3duIGFuZCBtb3VzZSBsZWF2ZVxyXG4gICAgICAgICAgICB2YXIgZGlmZiA9IERhdGUubm93KCkgLSBOdW1iZXIocmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS1ob2xkJykpO1xyXG4gICAgICAgICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRlbGF5IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsYXkgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGYWRlIG91dCByaXBwbGUgYWZ0ZXIgZGVsYXlcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAndG9wJzogcmVsYXRpdmVZKydweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVgrJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6ICcwJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRHVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcclxuICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcclxuICAgICAgICAgICAgICAgICAgICAnLW8tdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zZm9ybSc6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUoc3R5bGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUNoaWxkKHJpcHBsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBFZmZlY3QuZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gTGl0dGxlIGhhY2sgdG8gbWFrZSA8aW5wdXQ+IGNhbiBwZXJmb3JtIHdhdmVzIGVmZmVjdFxyXG4gICAgICAgIHdyYXBJbnB1dDogZnVuY3Rpb24oZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBlbGVtZW50cy5sZW5ndGg7IGErKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudHNbYV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpbnB1dCBhbHJlYWR5IGhhdmUgcGFyZW50IGp1c3QgcGFzcyB0aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpJyAmJiBwYXJlbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFB1dCBlbGVtZW50IGNsYXNzIGFuZCBzdHlsZSB0byB0aGUgc3BlY2lmaWVkIHBhcmVudFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lICsgJyB3YXZlcy1pbnB1dC13cmFwcGVyJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50U3R5bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFN0eWxlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBlbGVtZW50U3R5bGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc05hbWUgPSAnd2F2ZXMtYnV0dG9uLWlucHV0JztcclxuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFB1dCBlbGVtZW50IGFzIGNoaWxkXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2FibGUgbW91c2Vkb3duIGV2ZW50IGZvciA1MDBtcyBkdXJpbmcgYW5kIGFmdGVyIHRvdWNoXHJcbiAgICAgKi9cclxuICAgIHZhciBUb3VjaEhhbmRsZXIgPSB7XHJcbiAgICAgICAgLyogdXNlcyBhbiBpbnRlZ2VyIHJhdGhlciB0aGFuIGJvb2wgc28gdGhlcmUncyBubyBpc3N1ZXMgd2l0aFxyXG4gICAgICAgICAqIG5lZWRpbmcgdG8gY2xlYXIgdGltZW91dHMgaWYgYW5vdGhlciB0b3VjaCBldmVudCBvY2N1cnJlZFxyXG4gICAgICAgICAqIHdpdGhpbiB0aGUgNTAwbXMuIENhbm5vdCBtb3VzZXVwIGJldHdlZW4gdG91Y2hzdGFydCBhbmRcclxuICAgICAgICAgKiB0b3VjaGVuZCwgbm9yIGluIHRoZSA1MDBtcyBhZnRlciB0b3VjaGVuZC4gKi9cclxuICAgICAgICB0b3VjaGVzOiAwLFxyXG4gICAgICAgIGFsbG93RXZlbnQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGFsbG93ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xyXG4gICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAndG91Y2hlbmQnIHx8IGUudHlwZSA9PT0gJ3RvdWNoY2FuY2VsJykge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaGVzIC09IDE7IC8vcG9wIGFmdGVyIDUwMG1zXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmIFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYWxsb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFsbG93O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG91Y2h1cDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBUb3VjaEhhbmRsZXIuYWxsb3dFdmVudChlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGVnYXRlZCBjbGljayBoYW5kbGVyIGZvciAud2F2ZXMtZWZmZWN0IGVsZW1lbnQuXHJcbiAgICAgKiByZXR1cm5zIG51bGwgd2hlbiAud2F2ZXMtZWZmZWN0IGVsZW1lbnQgbm90IGluIFwiY2xpY2sgdHJlZVwiXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldFdhdmVzRWZmZWN0RWxlbWVudChlKSB7XHJcbiAgICAgICAgaWYgKFRvdWNoSGFuZGxlci5hbGxvd0V2ZW50KGUpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xyXG5cclxuICAgICAgICB3aGlsZSAodGFyZ2V0LnBhcmVudE5vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCkgJiYgdGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCd3YXZlcy1lZmZlY3QnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWJibGUgdGhlIGNsaWNrIGFuZCBzaG93IGVmZmVjdCBpZiAud2F2ZXMtZWZmZWN0IGVsZW0gd2FzIGZvdW5kXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNob3dFZmZlY3QoZSkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpO1xyXG5cclxuICAgICAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBFZmZlY3Quc2hvdyhlLCBlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFdhdmVzLmRpc3BsYXlFZmZlY3QgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgIGlmICgnZHVyYXRpb24nIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgRWZmZWN0LmR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vV3JhcCBpbnB1dCBpbnNpZGUgPGk+IHRhZ1xyXG4gICAgICAgIEVmZmVjdC53cmFwSW5wdXQoJCQoJy53YXZlcy1lZmZlY3QnKSk7XHJcblxyXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIFdhdmVzIHRvIGFuIGlucHV0IGVsZW1lbnQgKG9yIGFueSBlbGVtZW50IHdoaWNoIGRvZXNuJ3RcclxuICAgICAqIGJ1YmJsZSBtb3VzZXVwL21vdXNlZG93biBldmVudHMpLlxyXG4gICAgICogICBJbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggZHluYW1pY2FsbHkgbG9hZGVkIGZvcm1zL2lucHV0cywgb3JcclxuICAgICAqIHdoZXJlIHRoZSB1c2VyIGRvZXNuJ3Qgd2FudCBhIGRlbGVnYXRlZCBjbGljayBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBXYXZlcy5hdHRhY2ggPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgLy9GVVRVUkU6IGF1dG9tYXRpY2FsbHkgYWRkIHdhdmVzIGNsYXNzZXMgYW5kIGFsbG93IHVzZXJzXHJcbiAgICAgICAgLy8gdG8gc3BlY2lmeSB0aGVtIHdpdGggYW4gb3B0aW9ucyBwYXJhbT8gRWcuIGxpZ2h0L2NsYXNzaWMvYnV0dG9uXHJcbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XHJcbiAgICAgICAgICAgIEVmZmVjdC53cmFwSW5wdXQoW2VsZW1lbnRdKTtcclxuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5XYXZlcyA9IFdhdmVzO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBXYXZlcy5kaXNwbGF5RWZmZWN0KCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG59KSh3aW5kb3cpO1xyXG5cblwidXNlIHN0cmljdFwiO1xuXG4vLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvNC10L3RjlxuXG52YXIgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1tZW51XCIpLFxuICAgIGhlYWRlclRvcEJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX190b3AtYmFyXCIpO1xuXG4vLyDQmtC90L7Qv9C60LAg0LzQvtCx0LjQu9GM0L3QvtCz0L4g0LzQtdC90Y5cbnZhciBmb3JFYWNoPWZ1bmN0aW9uKHQsbyxyKXtpZihcIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKWZvcih2YXIgYyBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGMpJiZvLmNhbGwocix0W2NdLGMsdCk7ZWxzZSBmb3IodmFyIGU9MCxsPXQubGVuZ3RoO2w+ZTtlKyspby5jYWxsKHIsdFtlXSxlLHQpfTtcbnZhciBoYW1idXJnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oYW1idXJnZXJcIik7XG5pZiAoaGFtYnVyZ2Vycy5sZW5ndGggPiAwKSB7XG4gICAgZm9yRWFjaChoYW1idXJnZXJzLCBmdW5jdGlvbihoYW1idXJnZXIpIHtcbiAgICAgICAgaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIGhlYWRlclRvcEJhci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgfSk7XG59XG5cblxuLy8g0J3QsNCy0LjQs9Cw0YbQuNGPINC/0L4g0YDQsNGB0L/QuNGB0LDQvdC40Y4g0LfQsNC90Y/RgtC40LlcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRhYnMgPSAkKCcjdGltZXRhYmxlLW5hdmlnYXRpb24nKTtcbiAgICAkdGFicy5yZXNwb25zaXZlVGFicyh7XG4gICAgICAgIHJvdGF0ZTogZmFsc2UsXG4gICAgICAgIHN0YXJ0Q29sbGFwc2VkOiAnYWNjb3JkaW9uJyxcbiAgICAgICAgY29sbGFwc2libGU6ICdhY2NvcmRpb24nLFxuICAgICAgICBzZXRIYXNoOiB0cnVlXG4gICAgfSk7XG59KTtcblxuXG4iXX0=
